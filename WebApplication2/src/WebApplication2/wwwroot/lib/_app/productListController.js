!function(){"use strict";function r(r,t,e,a,i){var n=this;n.errorMessage="",n.isBusy=!0,e.responseData=[],e.cartItems=[],n.categoryFilter=[],n.categoryFilter.isChecked=[],n.categoryFilter.categoryName=[],n.brandFilter=[],n.brandFilter.isChecked=[],n.brandFilter.brandName=[],n.sizeFilter=[],n.sizeFilter.isChecked=[],n.sizeFilter.size=[],e.pageNumber=1,n.minProductNr=0,n.maxProductNr=9,n.limit=9,n.order="brand",n.ordering="Márka",n.isActivePage=1,n.filteredProducts=[];var o=t.absUrl().split("App/Product/")[0],u=t.absUrl().split("App/Product/")[1];n.category=u.split("#/")[0],n.productInfoUrl=o+"App/ProductInfo/";var c="/api/product/"+n.category,s="/cart/";r.get(c).then(function(r){angular.copy(r.data,e.responseData),e.pageNumber=Math.ceil(e.responseData.product.length/9)-1},function(r){n.errorMessage="Failed to load data"}).finally(function(){n.isBusy=!1}),r.get(s).then(function(r){angular.copy(r.data,e.cartItems)},function(r){n.errorMessage="Failed to load data"+r}).finally(function(){n.isBusy=!1}),n.addToCart=function(t){n.isBusy=!0,n.errorMessage="",n.quantity(t),e.cartItems.push(t),$(".shop-badge .badge").text(e.cartItems.length),r.post("/cart/AddToCart",e.responseData.product[t]).then(function(r){},function(r){n.errorMessage=r}).finally(function(){n.isBusy=!1})},n.quantity=function(r){e.responseData.product[r].quantity=1},e.getNumber=function(r){return new Array(r)},n.nextPage=function(){e.pageNumber>=1&&e.responseData.product.length>n.maxProductNr&&(n.minProductNr=n.minProductNr+9,n.maxProductNr=n.maxProductNr+9)},n.previousPage=function(){e.pageNumber>=1&&n.minProductNr>8&&(n.minProductNr=n.minProductNr-9,n.maxProductNr=n.maxProductNr-9)},n.jumpToPage=function(r){n.minProductNr=r*n.limit-n.limit,n.maxProductNr=r*n.limit,n.isActivePage=r},n.orderByBrand=function(){n.order="brand",n.ordering="Márka"},n.orderByCategory=function(){n.order="category",n.ordering="Kategória"},n.orderBySize=function(){n.order="size",n.ordering="Méret"},n.setNine=function(){n.maxProductNr=n.minProductNr+9,n.limit=9},n.setEightteen=function(){n.maxProductNr=n.minProductNr+18,n.limit=18},n.setTwentyseven=function(){n.maxProductNr=n.minProductNr+27,n.limit=27},n.stateChanged=function(r){if(n.minProductNr=0,n.maxProductNr=9,n.brandFilter.isChecked[r])n.brandFilter.brandName.push(e.responseData.brand[r]);else{var t=e.responseData.brand[r],a=n.brandFilter.brandName.indexOf(t);a>-1&&n.brandFilter.brandName.splice(a,1)}e.pageNumber=Math.ceil(n.filteredProducts.length/9)},n.categoryStateChanged=function(r){if(n.minProductNr=0,n.maxProductNr=9,n.categoryFilter.isChecked[r])n.categoryFilter.categoryName.push(e.responseData.category[r]);else{var t=e.responseData.category[r],a=n.categoryFilter.categoryName.indexOf(t);a>-1&&n.categoryFilter.categoryName.splice(a,1)}e.pageNumber=Math.ceil(n.filteredProducts.length/9)},n.sizeStateChanged=function(r){if(n.minProductNr=0,n.maxProductNr=9,n.sizeFilter.isChecked[r])n.sizeFilter.size.push(e.responseData.size[r]);else{var t=e.responseData.size[r],a=n.sizeFilter.size.indexOf(t);a>-1&&n.sizeFilter.size.splice(a,1)}e.pageNumber=Math.ceil(n.filteredProducts.length/9)},e.getBrandCount=function(r){return i("filter")(e.responseData.product,{brand:r}).length},e.getCatCount=function(r){return i("filter")(e.responseData.product,{subCategory:r}).length},e.getSizeCount=function(r){return i("filter")(e.responseData.product,{size:r}).length}}r.$inject=["$http","$location","$scope","$parse","$filter"],angular.module("app-productList").controller("productListController",r),angular.module("app-productList").filter("filterMultiple",["$filter",function(r){return function(t,e){var a={data:t,filteredData:[],applyFilter:function(t,e){var a=[];if(0==this.filteredData.length&&(this.filteredData=this.data),t){var i={};if(angular.isArray(t)){if(angular.isArray(t)&&t.length>0)for(var n=0;n<t.length;n++)angular.isDefined(t[n])&&(i[e]=t[n],a=a.concat(r("filter")(this.filteredData,i)))}else i[e]=t,a=a.concat(r("filter")(this.filteredData,i));a.length>0&&(this.filteredData=a)}}};return e&&angular.forEach(e,function(r,t){a.applyFilter(r,t)}),a.filteredData}}]),angular.module("app-productList").filter("unique",function(){return function(r,t){if(t===!1)return r;if((t||angular.isUndefined(t))&&angular.isArray(r)){var e=[],a=function(r){return angular.isObject(r)&&angular.isString(t)?r[t]:r};angular.forEach(r,function(r){for(var t=!1,i=0;i<e.length;i++)if(angular.equals(a(e[i]),a(r))){t=!0;break}t||e.push(r)}),r=e}return r}})}();