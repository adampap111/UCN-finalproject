!function(){"use strict";function t(t,a){var n=this;a.products=[],a.cartItems=[],n.errorMessage="",n.isBusy=!0;var o="/api/",r="/cart/";t.get(o).then(function(t){angular.copy(t.data,a.products)},function(t){n.errorMessage="Failed to load data"+t}).finally(function(){n.isBusy=!1}),t.get(r).then(function(t){angular.copy(t.data,a.cartItems)},function(t){n.errorMessage="Failed to load data"+t}).finally(function(){n.isBusy=!1}),n.addToCart=function(o){n.isBusy=!0,n.errorMessage="",n.quantity(o),a.cartItems.push(o),$(".shop-badge .badge").text(a.cartItems.length),t.post("/cart/AddToCart",a.products[o]).then(function(t){},function(t){n.errorMessage=t}).finally(function(){n.isBusy=!1})},n.quantity=function(t){a.products[t].quantity=1}}t.$inject=["$http","$scope"],angular.module("app-product").controller("productController",t)}();