!function(){"use strict";function t(t,a,n){var o=this;o.errorMessage="",n.errorMessage2="",o.isBusy=!0,n.quantity=1,n.cartItems=[],n.responseData={},n.responseData.quantity=n.quantity;var e=a.absUrl().split("App/ProductInfo/")[1];o.productName=e.split("#/")[0];var r="/api/productInfo/"+o.productName,s="/cart/";o.cartViewModel={},t.get(r).then(function(t){angular.copy(t.data,n.responseData)},function(t){o.errorMessage="Failed to load stops"}).finally(function(){o.isBusy=!1}),t.get(s).then(function(t){angular.copy(t.data,n.cartItems)},function(t){o.errorMessage="Failed to load data"+t}).finally(function(){o.isBusy=!1}),n.addition=function(){n.quantity=n.quantity+1,n.responseData.quantity=n.quantity},n.substract=function(){n.quantity>1&&(n.quantity=n.quantity-1,n.responseData.quantity=n.quantity)},n.addItem=function(){o.isBusy=!0,o.errorMessage="",$(".shop-badge .badge").text(n.cartItems.length+1),t.post("/cart/AddToCart",n.responseData).then(function(t){},function(t){o.errorMessage=t}).finally(function(){o.isBusy=!1})}}t.$inject=["$http","$location","$scope"],angular.module("app-productInfo").controller("productInfoController",t)}();